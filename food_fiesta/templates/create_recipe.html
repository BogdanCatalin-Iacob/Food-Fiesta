{% extends "base.html" %}

{% block content %}

<h1 class="deep-orange-text text-darken-4 center-align">Create Recipe</h1>

<div class="row">
    <form id="createRecipeForm" class="col s12 m8 offset-m2" method="POST" action="{{ url_for('create_recipe') }}">
        <div class="card-panel grey lighten-4">

            <!-- Category selector -->
            <div class="row">
                <div class="input-field col s12">
                    <i class="fa-solid fa-book-open prefix green-text text-lighten-2"></i>
                    <select aria-label="category selection list" id="category_id" name="category_id" class="validate" required>
                        <option value="" disabled selected>Choose Category</option>
                        {% for category in categories %}
                            <option value="{{ category.id }}">{{ category.category_name }}</option>
                        {% endfor%}
                    </select>
                    <label for="category_id" class="black-text">Categories</label>
                </div>
            </div>

            <!--Recipe name-->
            <div class="row">
                <div class="input-field col s12">
                    <i class="fa-solid fa-tag prefix green-text text-lighten-2"></i>
                    <input id="recipe_name" name="recipe_name" type="text" minlength="5" maxlength="25" class="validate"
                        required>
                    <label for="recipe_name" class="black-text">Recipe name</label>
                </div>
            </div>

            <!--Preparation, cooking, total time-->
            
            <div class="row">
                <!-- Servings -->
                <div class="input-field col s12 m3">
                    <i class="fa-solid fa-bowl-food prefix green-text text-lighten-2"></i>
                    <input id="servings" name="servings" type="number" min="1"
                        onfocus="this.value=''" value="0" class="validate" required>
                    <label for="servings" class="black-text">Servings:</label>
                </div>

                <!-- Preparation time -->
                <div class="input-field col s12 m5">
                    <i class="fa-solid fa-carrot prefix green-text text-lighten-2"></i>
                    <input id="prep_time" name="prep_time" type="number" min="0"
                        onfocus="this.value=''" value="0" class="validate" required>
                    <label for="prep_time" class="black-text">Preparation time:</label>
                </div>

                <!-- Cooking time -->
                <div class="input-field col s12 m4">
                    <i class="fa-solid fa-fire-burner prefix green-text text-lighten-2"></i>
                    <input id="cook_time" name="cook_time" type="number" min="0"
                        onfocus="this.value=''" value="0" class="validate" required>
                    <label for="cook_time" class="black-text">Cooking time:</label>
                </div>
            </div>

            <!-- Ingredients -->
            <div class="row">
                <div id="ingredients-list" class="col s12 hide"></div>
            </div>
            <div class="row valign-wrapper">
                <span id="empty-field" class="hide">Field cannot be empty</span>
                <div class="input-field col s10">
                    <i class="fa-solid fa-list prefix green-text text-lighten-2"></i>
                    <input type="text" id="ingredients" name="ingredients" minlength="3" maxlength="50"
                        class="validate">
                    <label for="ingredients" class="black-text">Ingredients:</label>
                </div>
                <div id="addButton" class="col s2 btn light-green darken-2 black-text text-shadow waves-effect waves-light">Add</div>
            </div>

            <!-- Preparation -->
            <div class="row ">
                <div id="steps-list" class="col s12 hide"></div>
            </div>
            <div class="row valign-wrapper">
                <span id="empty-field-prep" class="hide">Field cannot be empty</span>
                <div class="input-field col s10">
                    <i class="fa-solid fa-list-ol prefix green-text text-lighten-2"></i>
                    <textarea id="steps" name="steps" minlength="3" class="materialize-textarea"></textarea>
                    <label for="steps" class="black-text"><span id="prep-step">Preparation step 1:</span></label>
                </div>
                <div id="addStepButton" class="col s2 btn light-green darken-2 black-text text-shadow waves-effect waves-light">Add</div>
            </div>

            <!--Create button-->
            <div class="row">
                <button type="submit" class="col s12 btn btn-large light-green darken-2 black-text text-shadow waves-effect waves-light">
                    <i class="fa-solid fa-floppy-disk prefix white-text text-lighten-2"></i>
                    Create recipe
                </button>
            </div>
        </div>
    </form>
</div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/recipes_forms.js') }}"></script>
{% endblock %}